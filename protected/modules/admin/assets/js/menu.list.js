// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    var checkboxes, grid, moveButtons;
    grid = $('#structure-grid');
    checkboxes = $('input:checkbox', grid);
    moveButtons = $('.actions .btn');
    checkboxes.click(function(e) {
      var self;
      self = $(this);
      if (self.prop('checked')) {
        checkboxes.not(self).prop('checked', false);
      }
      if (checkboxes.filter(':checked').size() > 0) {
        return moveButtons.removeClass('disabled');
      } else {
        return moveButtons.addClass('disabled');
      }
    });
    return moveButtons.on('click', function(e) {
      var row, self;
      self = $(this);
      row = checkboxes.filter(':checked').closest('.row');
      if (row.size() <= 0 || self.hasClass('disabled')) {
        return false;
      }
      $.ajax({
        url: self.attr('href'),
        dataType: 'json',
        type: 'POST',
        data: {
          id: row.data('id')
        },
        success: function(data) {
          var item;
          if (data.success) {
            item = row.closest('li');
            if (data.action === 'down') {
              return item.next('li').after(item.detach());
            } else {
              return item.prev('li').before(item.detach());
            }
          }
        }
      });
      return false;
    });
  });

}).call(this);

/*
//@ sourceMappingURL=menu.list.map
*/
